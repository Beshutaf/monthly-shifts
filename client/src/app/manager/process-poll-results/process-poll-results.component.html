<mat-spinner *ngIf="polls == null || polls.length == 0"></mat-spinner>
<form *ngIf="polls != null && polls.length != 0">
  <mat-form-field>
    <mat-select placeholder="סקר" [(ngModel)]="selectedPollId" name="poll_selection">
      <mat-option *ngFor="let poll of polls" [value]="poll._id">{{poll.name}} {{getMonthView(poll.month)}}/{{poll.year}}</mat-option>
    </mat-select>
  </mat-form-field>
  <div *ngIf="selectedPoll != null">
    <table>
      <thead>
        <th>שם</th>
        <th>סימוני "כן"</th>
        <th>סימוני "אולי"</th>
      </thead>
      <tbody>
        <tr *ngFor="let user of userPreferences">
          <td>{{user.name}}</td>
          <td>
            <div *ngFor="let yes of userYesses[user.name]">
              <mat-checkbox dir="ltr" labelPosition="before" [(ngModel)]="yes.isSelected" (change)="sortUserPreferences()" name="yes-checkbox">{{yes.option}}</mat-checkbox>
            </div>
          </td>
          <td>
            <div *ngFor="let maybe of userMaybes[user.name]">
              <mat-checkbox dir="ltr" labelPosition="before" [(ngModel)]="maybe.isSelected" (change)="sortUserPreferences()" name="maybe-checkbox">{{maybe.option}}</mat-checkbox>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</form>